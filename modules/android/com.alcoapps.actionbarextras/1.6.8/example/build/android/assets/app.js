var abx=require("com.alcoapps.actionbarextras"),opts={shareAction:!1,titleFont:!1,subtitleFont:!1,disableIcon:!1,dropdown:!1,homeup:!1,menuIcon:!1},dropdown,IconicFont=require("/lib/IconicFont"),fa=new IconicFont({font:"/lib/FontAwesome"}),win=Titanium.UI.createWindow();abx.window=win;var searchView=Ti.UI.Android.createSearchView({hintText:"Search ABX..."}),table=Ti.UI.createTableView({width:Ti.UI.FILL,height:Ti.UI.FILL,search:searchView,searchAsChild:!1}),data=[{title:"Title Font",action:"titleFont"},{title:"Subtitle Font",action:"subtitleFont"},{title:"Title Color",action:"titleColor"},{title:"Subtitle Color",action:"subtitleColor"},{title:"Background Color",action:"backgroundColor"},{title:"Disable Icon",action:"disableIcon"},{title:"Hide Logo",action:"hideLogo"},{title:"Sharing Action",action:"sharing"},{title:"Dropdown",action:"dropdown"},{title:"Custom Up icon",action:"customUp"},{title:"Set font object",action:"fontObject"},{title:"2nd window",action:"secondWindow"},{title:"Hide Subtitle",action:"hideSubtitle"},{title:"Get Actionbar height",action:"actionbarHeight"},{title:"Set Logo (FontAwesome)",action:"logoFont"},{title:"Set MenuItem icon (FontAwesome)",action:"menuIcon"},{title:"Set Title (FontAwesome)",action:"iconTitle"}],actions={titleFont:function(){abx.setTitleFont(opts.titleFont?"Aller":"Chunkfive"),opts.titleFont=!opts.titleFont},subtitleFont:function(){abx.setSubtitleFont(opts.subtitleFont?"Aller":"Chunkfive"),opts.subtitleFont=!opts.subtitleFont},titleColor:function(){abx.setTitleColor("#"+Math.floor(16777215*Math.random()).toString(16))},subtitleColor:function(){abx.setSubtitleColor("#"+Math.floor(16777215*Math.random()).toString(16))},backgroundColor:function(){abx.setBackgroundColor("#"+Math.floor(16777215*Math.random()).toString(16))},disableIcon:function(){opts.disableIcon=!opts.disableIcon,abx.setDisableIcon(opts.disableIcon)},hideLogo:function(){abx.hideLogo()},sharing:function(){opts.shareAction=!opts.shareAction,win.activity.invalidateOptionsMenu()},dropdown:function(){opts.dropdown=!opts.dropdown,opts.dropdown?(dropdown=abx.createDropdown({titles:["First","Second","Third"]}),dropdown.addEventListener("change",function(t){Ti.API.info("dropdown changed to: "+t.index)})):dropdown.remove()},customUp:function(){opts.homeup=!opts.homeup,win.activity.invalidateOptionsMenu()},fontObject:function(){abx.setTitle({text:"Font Object",font:{fontSize:26,fontFamily:"Chunkfive"}}),abx.setSubtitle({text:"Subtitle",font:{fontSize:"14dp",fontWeight:"bold",fontFamily:"Chunkfive"}})},secondWindow:function(){var t=Ti.UI.createWindow({backgroundColor:"yellow"});t.addEventListener("open",function(){abx.title="Changed title",abx.subtitle="while other win was in foreground",setTimeout(function(){t.close()},2e3)}),t.open()},hideSubtitle:function(){abx.setSubtitle(null)},actionbarHeight:function(){alert(abx.getActionbarHeight())},logoFont:function(){abx.setLogo({icon:fa.icon("fa-smile-o"),fontFamily:fa.fontfamily,color:"yellow"})},menuIcon:function(){opts.menuIcon=!opts.menuIcon,win.activity.invalidateOptionsMenu()},iconTitle:function(){abx.setTitle({text:fa.icon("fa-camera-retro")+"  "+fa.icon("fa-paw")+"  "+fa.icon("fa-android"),font:fa.fontfamily,color:"green"})}};table.setData(function(t){var o=[];return t.forEach(function(t){o.push(Ti.UI.createTableViewRow({title:t.title,action:t.action,height:"48dp",color:"#000",backgroundColor:"#fff",left:20}))}),o}(data)),table.addEventListener("click",function(t){actions[t.row.action]()}),win.addEventListener("open",function(){abx.title="ActionbarExtras",abx.titleFont="Aller",abx.subtitle="for some extra action",abx.subtitleFont="Aller";var t=win.getActivity();t&&(t.onCreateOptionsMenu=function(o){if(o.menu.clear(),o.menu.add({title:"Search",actionView:searchView,icon:Ti.Android.R.drawable.ic_menu_search?Ti.Android.R.drawable.ic_menu_search:"my_search.png",showAsAction:Ti.Android.SHOW_AS_ACTION_IF_ROOM|Ti.Android.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW}),abx.setSearchView({searchView:searchView,backgroundColor:"#777",textColor:"yellow",hintColor:"orange",line:"/images/my_textfield_activated_holo_light.9.png",cancelIcon:"/images/cancel.png",searchIcon:"/images/search.png"}),opts.shareAction){var n=Ti.Android.createIntent({action:Ti.Android.ACTION_SEND,type:"text/plain"});n.putExtra(Ti.Android.EXTRA_TEXT,"Hello world!"),abx.addShareAction({menu:o.menu,intent:n,showAsAction:Ti.Android.SHOW_AS_ACTION_ALWAYS,title:"Share Hello World"})}if(opts.homeup&&(t.actionBar.displayHomeAsUp=!0,abx.setHomeAsUpIcon("/images/menu.png")),opts.menuIcon){var e=o.menu.add({itemId:101,title:"Settings",showAsAction:Ti.Android.SHOW_AS_ACTION_ALWAYS});e.addEventListener("click",function(){alert("Settings clicked")}),abx.setMenuItemIcon({menu:o.menu,menuItem:e,fontFamily:fa.fontfamily,icon:fa.icon("fa-gear"),color:"#333333",size:30})}})}),win.add(table),win.open();